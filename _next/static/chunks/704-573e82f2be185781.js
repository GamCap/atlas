"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[704],{4492:function(e,t,n){/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(2265),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useState,u=r.useEffect,l=r.useLayoutEffect,a=r.useDebugValue;function s(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),o=r[0].inst,c=r[1];return l(function(){o.value=n,o.getSnapshot=t,s(o)&&c({inst:o})},[e,n,t]),u(function(){return s(o)&&c({inst:o}),e(function(){s(o)&&c({inst:o})})},[e]),a(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},5107:function(e,t,n){/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(2265),o=n(554),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},u=o.useSyncExternalStore,l=r.useRef,a=r.useEffect,s=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var d=l(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;var h=u(e,(d=s(function(){function e(e){if(!a){if(a=!0,u=e,e=r(e),void 0!==o&&f.hasValue){var t=f.value;if(o(t,e))return l=t}return l=e}if(t=l,i(u,e))return t;var n=r(e);return void 0!==o&&o(t,n)?t:(u=e,l=n)}var u,l,a=!1,s=void 0===n?null:n;return[function(){return e(t())},null===s?void 0:function(){return e(s())}]},[t,n,r,o]))[0],d[1]);return a(function(){f.hasValue=!0,f.value=h},[h]),c(h),h}},554:function(e,t,n){e.exports=n(4492)},5006:function(e,t,n){e.exports=n(5107)},8302:function(e,t,n){n.d(t,{t8:function(){return h},jD:function(){return c},QZ:function(){return y},IY:function(){return d},Ly:function(){return p},oW:function(){return f},oC:function(){return e5},Ql:function(){return e8},FD:function(){return e9},X6:function(){return tl},Z_:function(){return ek},yF:function(){return eW},q7:function(){return Y},s9:function(){return q},n3:function(){return eY},Ki:function(){return ei},wQ:function(){return A},Qj:function(){return T},ZB:function(){return ey},Qu:function(){return C},lM:function(){return eM},OQ:function(){return eS},oI:function(){return et},Zp:function(){return N},t_:function(){return eg},JU:function(){return ej},WD:function(){return F},xx:function(){return eH},wv:function(){return eb},J6:function(){return D},S2:function(){return em},W0:function(){return j},dW:function(){return eC},Rf:function(){return ef},f5:function(){return R},lp:function(){return en},OW:function(){return eL},Hm:function(){return eB},$i:function(){return es},so:function(){return eG},k5:function(){return z},Ky:function(){return k},J3:function(){return O},RY:function(){return eT},s$:function(){return ev},Q5:function(){return ec},N5:function(){return ew},Vt:function(){return _},kE:function(){return eo},J$:function(){return er},nb:function(){return eh},PS:function(){return U},hO:function(){return eU},m:function(){return el},oj:function(){return ea},_2:function(){return eu},VV:function(){return eq},be:function(){return e0},B1:function(){return eJ}});var r,o,i,u,l,a,s,c,d,f,h,y,p,g,m=n(2779),x=n(7807),v=n(9821),w=n(6772),b=n(2270),E=e=>()=>e;function M(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:u,y:l,dx:a,dy:s,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:s,enumerable:!0,configurable:!0},_:{value:c}})}function $(e){return!e.ctrlKey&&!e.button}function I(){return this.parentNode}function S(e,t){return null==t?{x:e.x,y:e.y}:t}function P(){return navigator.maxTouchPoints||"ontouchstart"in this}M.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var H=n(2333);let T={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${n?r:n}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},z=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],A=["Enter"," ","Escape"];(r=c||(c={})).Strict="strict",r.Loose="loose",(o=d||(d={})).Free="free",o.Vertical="vertical",o.Horizontal="horizontal",(i=f||(f={})).Partial="partial",i.Full="full";let k={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};(u=h||(h={})).Bezier="default",u.Straight="straight",u.Step="step",u.SmoothStep="smoothstep",u.SimpleBezier="simplebezier",(l=y||(y={})).Arrow="arrow",l.ArrowClosed="arrowclosed",(a=p||(p={})).Left="left",a.Top="top",a.Right="right",a.Bottom="bottom";let B={[p.Left]:p.Right,[p.Right]:p.Left,[p.Top]:p.Bottom,[p.Bottom]:p.Top};function N(e){return null===e?null:e?"valid":"invalid"}let O=e=>"id"in e&&"source"in e&&"target"in e,_=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),L=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),V=(e,t=[0,0])=>{let{width:n,height:r}=ef(e),o=e.origin??t,i=n*o[0],u=r*o[1];return{x:e.position.x-i,y:e.position.y-u}},j=(e,t={})=>{if(0===e.size)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(e=>{if(void 0===t.filter||t.filter(e)){let t=ee(e);n=Q(n,t)}}),J(n)},R=(e,t,[n,r,o]=[0,0,1],i=!1,u=!1)=>{let l={...el(t,[n,r,o]),width:t.width/o,height:t.height/o},a=[];for(let[,t]of e){let{measured:e,selectable:n=!0,hidden:r=!1}=t,o=e.width??t.width??t.initialWidth??null,s=e.height??t.height??t.initialHeight??null;if(u&&!n||r)continue;let c=en(l,U(t)),d=null===o||null===s,f=i&&c>0,h=(o??0)*(s??0);(d||f||c>=h||t.dragging)&&a.push(t)}return a},Z=(e,t)=>{let n=new Set;return e.forEach(e=>{n.add(e.id)}),t.filter(e=>n.has(e.source)||n.has(e.target))};function D(e,t){let n=new Map,r=t?.nodes?new Set(t.nodes.map(e=>e.id)):null;return e.forEach(e=>{e.measured.width&&e.measured.height&&(t?.includeHiddenNodes||!e.hidden)&&(!r||r.has(e.id))&&n.set(e.id,e)}),n}async function C({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:i},u){if(0===e.size)return Promise.resolve(!1);let l=es(j(e),t,n,u?.minZoom??o,u?.maxZoom??i,u?.padding??.1);return await r.setViewport(l,{duration:u?.duration}),Promise.resolve(!0)}function Y({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:i}){var u;let l=n.get(e),a=l.parentId?n.get(l.parentId):void 0,{x:s,y:c}=a?a.internals.positionAbsolute:{x:0,y:0},d=l.origin??r,f=(u=l.extent||o)&&"parent"!==u?[u[0],[u[1][0]-(l.measured?.width??0),u[1][1]-(l.measured?.height??0)]]:u;if("parent"!==l.extent||l.expandParent)a&&ed(l.extent)&&(f=[[l.extent[0][0]+s,l.extent[0][1]+c],[l.extent[1][0]+s,l.extent[1][1]+c]]);else if(a){let e=l.measured.width,t=l.measured.height,n=a.measured.width,r=a.measured.height;e&&t&&n&&r&&(f=[[s,c],[s+n-e,c+r-t]])}else i?.("005",T.error005());let h=ed(f)?q(t,f):t;return{position:{x:h.x-s+l.measured.width*d[0],y:h.y-c+l.measured.height*d[1]},positionAbsolute:h}}async function F({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){let i=new Set(e.map(e=>e.id)),u=[];for(let e of n){if(!1===e.deletable)continue;let t=i.has(e.id),n=!t&&e.parentId&&u.find(t=>t.id===e.parentId);(t||n)&&u.push(e)}let l=new Set(t.map(e=>e.id)),a=r.filter(e=>!1!==e.deletable),s=Z(u,a);for(let e of a)l.has(e.id)&&!s.find(t=>t.id===e.id)&&s.push(e);if(!o)return{edges:s,nodes:u};let c=await o({nodes:u,edges:s});return"boolean"==typeof c?c?{edges:s,nodes:u}:{edges:[],nodes:[]}:c}let X=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),q=(e={x:0,y:0},t)=>({x:X(e.x,t[0][0],t[1][0]),y:X(e.y,t[0][1],t[1][1])}),W=(e,t,n)=>e<t?X(Math.abs(e-t),1,t)/t:e>n?-X(Math.abs(e-n),1,t)/t:0,K=(e,t,n=15,r=40)=>[W(e.x,r,t.width-r)*n,W(e.y,r,t.height-r)*n],Q=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),G=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),J=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),U=(e,t=[0,0])=>{let{x:n,y:r}=L(e)?e.internals.positionAbsolute:V(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},ee=(e,t=[0,0])=>{let{x:n,y:r}=L(e)?e.internals.positionAbsolute:V(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},et=(e,t)=>J(Q(G(e),G(t))),en=(e,t)=>Math.ceil(Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x))*Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y))),er=e=>eo(e.width)&&eo(e.height)&&eo(e.x)&&eo(e.y),eo=e=>!isNaN(e)&&isFinite(e),ei=(e,t)=>{},eu=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),el=({x:e,y:t},[n,r,o],i=!1,u=[1,1])=>{let l={x:(e-n)/o,y:(t-r)/o};return i?eu(l,u):l},ea=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),es=(e,t,n,r,o,i)=>{let u=X(Math.min(t/(e.width*(1+i)),n/(e.height*(1+i))),r,o);return{x:t/2-(e.x+e.width/2)*u,y:n/2-(e.y+e.height/2)*u,zoom:u}},ec=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function ed(e){return void 0!==e&&"parent"!==e}function ef(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function eh(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function ey(e,t={width:0,height:0},n,r,o){let i=n,u={...e};for(;i;){let e=r.get(i);if(i=e?.parentId,e){let n=e.origin||o;u.x+=e.internals.positionAbsolute.x-(t.width??0)*n[0],u.y+=e.internals.positionAbsolute.y-(t.height??0)*n[1]}}return u}function ep(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r}){let{x:o,y:i}=eb(e),u=el({x:o,y:i},r),{x:l,y:a}=n?eu(u,t):u;return{xSnapped:l,ySnapped:a,...u}}let eg=e=>({width:e.offsetWidth,height:e.offsetHeight}),em=e=>e.getRootNode?.()||window?.document,ex=["INPUT","SELECT","TEXTAREA"];function ev(e){let t=e.composedPath?.()?.[0]||e.target;return ex.includes(t?.nodeName)||t?.hasAttribute("contenteditable")||!!t?.closest(".nokey")}let ew=e=>"clientX"in e,eb=(e,t)=>{let n=ew(e),r=n?e.clientX:e.touches?.[0].clientX,o=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:o-(t?.top??0)}},eE=(e,t,n,r,o)=>{let i=t.querySelectorAll(`.${e}`);return i&&i.length?Array.from(i).map(t=>{let i=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:o,position:t.getAttribute("data-handlepos"),x:(i.left-n.left)/r,y:(i.top-n.top)/r,...eg(t)}}):null};function eM({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:u,targetControlY:l}){let a=.125*e+.375*o+.375*u+.125*n,s=.125*t+.375*i+.375*l+.125*r;return[a,s,Math.abs(a-e),Math.abs(s-t)]}function e$(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function eI({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case p.Left:return[t-e$(t-r,i),n];case p.Right:return[t+e$(r-t,i),n];case p.Top:return[t,n-e$(n-o,i)];case p.Bottom:return[t,n+e$(o-n,i)]}}function eS({sourceX:e,sourceY:t,sourcePosition:n=p.Bottom,targetX:r,targetY:o,targetPosition:i=p.Top,curvature:u=.25}){let[l,a]=eI({pos:n,x1:e,y1:t,x2:r,y2:o,c:u}),[s,c]=eI({pos:i,x1:r,y1:o,x2:e,y2:t,c:u}),[d,f,h,y]=eM({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:l,sourceControlY:a,targetControlX:s,targetControlY:c});return[`M${e},${t} C${l},${a} ${s},${c} ${r},${o}`,d,f,h,y]}function eP({sourceX:e,sourceY:t,targetX:n,targetY:r}){let o=Math.abs(n-e)/2,i=Math.abs(r-t)/2;return[n<e?n+o:n-o,r<t?r+i:r-i,o,i]}function eH({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1}){if(!o)return r;let i=n||t.selected||e.selected,u=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(i?u:0)}function eT({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){let i=Q(ee(e),ee(t));return i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1),en({x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]},J(i))>0}let ez=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,eA=(e,t)=>t.some(t=>t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)),ek=(e,t)=>{let n;return e.source&&e.target?eA(n=O(e)?{...e}:{...e,id:ez(e)},t)?t:(null===n.sourceHandle&&delete n.sourceHandle,null===n.targetHandle&&delete n.targetHandle,t.concat(n)):(ei("006",T.error006()),t)};function eB({sourceX:e,sourceY:t,targetX:n,targetY:r}){let[o,i,u,l]=eP({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,u,l]}let eN={[p.Left]:{x:-1,y:0},[p.Right]:{x:1,y:0},[p.Top]:{x:0,y:-1},[p.Bottom]:{x:0,y:1}},eO=({source:e,sourcePosition:t=p.Bottom,target:n})=>t===p.Left||t===p.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},e_=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function eL({sourceX:e,sourceY:t,sourcePosition:n=p.Bottom,targetX:r,targetY:o,targetPosition:i=p.Top,borderRadius:u=5,centerX:l,centerY:a,offset:s=20}){let[c,d,f,h,y]=function({source:e,sourcePosition:t=p.Bottom,target:n,targetPosition:r=p.Top,center:o,offset:i}){let u,l;let a=eN[t],s=eN[r],c={x:e.x+a.x*i,y:e.y+a.y*i},d={x:n.x+s.x*i,y:n.y+s.y*i},f=eO({source:c,sourcePosition:t,target:d}),h=0!==f.x?"x":"y",y=f[h],g=[],m={x:0,y:0},x={x:0,y:0},[v,w,b,E]=eP({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[h]*s[h]==-1){u=o.x??v,l=o.y??w;let e=[{x:u,y:c.y},{x:u,y:d.y}],t=[{x:c.x,y:l},{x:d.x,y:l}];g=a[h]===y?"x"===h?e:t:"x"===h?t:e}else{let o=[{x:c.x,y:d.y}],f=[{x:d.x,y:c.y}];if(g="x"===h?a.x===y?f:o:a.y===y?o:f,t===r){let t=Math.abs(e[h]-n[h]);if(t<=i){let r=Math.min(i-1,i-t);a[h]===y?m[h]=(c[h]>e[h]?-1:1)*r:x[h]=(d[h]>n[h]?-1:1)*r}}if(t!==r){let e="x"===h?"y":"x",t=a[h]===s[e],n=c[e]>d[e],r=c[e]<d[e];(1===a[h]&&(!t&&n||t&&r)||1!==a[h]&&(!t&&r||t&&n))&&(g="x"===h?o:f)}let p={x:c.x+m.x,y:c.y+m.y},v={x:d.x+x.x,y:d.y+x.y};Math.max(Math.abs(p.x-g[0].x),Math.abs(v.x-g[0].x))>=Math.max(Math.abs(p.y-g[0].y),Math.abs(v.y-g[0].y))?(u=(p.x+v.x)/2,l=g[0].y):(u=g[0].x,l=(p.y+v.y)/2)}return[[e,{x:c.x+m.x,y:c.y+m.y},...g,{x:d.x+x.x,y:d.y+x.y},n],u,l,b,E]}({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:l,y:a},offset:s});return[c.reduce((e,t,n)=>e+(n>0&&n<c.length-1?function(e,t,n,r){let o=Math.min(e_(e,t)/2,e_(t,n)/2,r),{x:i,y:u}=t;if(e.x===i&&i===n.x||e.y===u&&u===n.y)return`L${i} ${u}`;if(e.y===u){let t=e.x<n.x?-1:1,r=e.y<n.y?1:-1;return`L ${i+o*t},${u}Q ${i},${u} ${i},${u+o*r}`}let l=e.x<n.x?1:-1,a=e.y<n.y?-1:1;return`L ${i},${u+o*a}Q ${i},${u} ${i+o*l},${u}`}(c[n-1],t,c[n+1],u):`${0===n?"M":"L"}${t.x} ${t.y}`),""),d,f,h,y]}function eV(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function ej(e){let{sourceNode:t,targetNode:n}=e;if(!eV(t)||!eV(n))return null;let r=t.internals.handleBounds||eR(t.handles),o=n.internals.handleBounds||eR(n.handles),i=eD(r?.source??[],e.sourceHandle),u=eD(e.connectionMode===c.Strict?o?.target??[]:(o?.target??[]).concat(o?.source??[]),e.targetHandle);if(!i||!u)return e.onError?.("008",T.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;let l=i?.position||p.Bottom,a=u?.position||p.Top,s=eZ(t,i,l),d=eZ(n,u,a);return{sourceX:s.x,sourceY:s.y,targetX:d.x,targetY:d.y,sourcePosition:l,targetPosition:a}}function eR(e){if(!e)return null;let t=[],n=[];for(let r of e)r.width=r.width??1,r.height=r.height??1,"source"===r.type?t.push(r):"target"===r.type&&n.push(r);return{source:t,target:n}}function eZ(e,t,n=p.Left,r=!1){let o=(t?.x??0)+e.internals.positionAbsolute.x,i=(t?.y??0)+e.internals.positionAbsolute.y,{width:u,height:l}=t??ef(e);if(r)return{x:o+u/2,y:i+l/2};switch(t?.position??n){case p.Top:return{x:o+u/2,y:i};case p.Right:return{x:o+u,y:i+l/2};case p.Bottom:return{x:o+u/2,y:i+l};case p.Left:return{x:o,y:i+l/2}}}function eD(e,t){return e&&(t?e.find(e=>e.id===t):e[0])||null}function eC(e,t){if(!e)return"";if("string"==typeof e)return e;let n=t?`${t}__`:"";return`${n}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`}function eY(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){let i=new Set;return e.reduce((e,u)=>([u.markerStart||r,u.markerEnd||o].forEach(r=>{if(r&&"object"==typeof r){let o=eC(r,t);i.has(o)||(e.push({id:o,color:r.color||n,...r}),i.add(o))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))}let eF={nodeOrigin:[0,0],elevateNodesOnSelect:!0,defaults:{}},eX={...eF,checkEquality:!0};function eq(e,t,n){let r={...eF,...n};for(let n of e.values())n.parentId&&eK(n,e,t,r)}function eW(e,t,n,r){let o={...eX,...r},i=new Map(t);t.clear(),n.clear();let u=r?.elevateNodesOnSelect?1e3:0;for(let l of e){let e=i.get(l.id);o.checkEquality&&l===e?.internals.userNode||(e={...o.defaults,...l,measured:{width:l.measured?.width,height:l.measured?.height},internals:{positionAbsolute:V(l,o.nodeOrigin),handleBounds:l.measured?e?.internals.handleBounds:void 0,z:eQ(l,u),userNode:l}}),t.set(l.id,e),l.parentId&&eK(e,t,n,r)}}function eK(e,t,n,r){let o={...eF,...r},i=e.parentId,u=t.get(i);if(!u){console.warn(`Parent node ${i} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}let l=n.get(i);l?l.set(e.id,e):n.set(i,new Map([[e.id,e]]));let a=r?.elevateNodesOnSelect?1e3:0,{x:s,y:c,z:d}=function(e,t,n,r){let o=V(e,n),i=eQ(e,r),u=t.internals.z??0;return{x:t.internals.positionAbsolute.x+o.x,y:t.internals.positionAbsolute.y+o.y,z:u>i?u:i}}(e,u,o.nodeOrigin,a),f=e.internals.positionAbsolute,h=s!==f.x||c!==f.y;(h||d!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:h?{x:s,y:c}:f,z:d})}function eQ(e,t){return(eo(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function eG(e,t,n,r=[0,0]){let o=[],i=new Map;for(let n of e){let e=t.get(n.parentId);if(!e)continue;let r=et(i.get(n.parentId)?.expandedRect??U(e),n.rect);i.set(n.parentId,{expandedRect:r,parent:e})}return i.size>0&&i.forEach(({expandedRect:t,parent:i},u)=>{let l=i.internals.positionAbsolute,a=ef(i),s=i.origin??r,c=t.x<l.x?Math.round(Math.abs(l.x-t.x)):0,d=t.y<l.y?Math.round(Math.abs(l.y-t.y)):0,f=Math.max(a.width,Math.round(t.width)),h=Math.max(a.height,Math.round(t.height)),y=(f-a.width)*s[0],p=(h-a.height)*s[1];(c>0||d>0||y||p)&&(o.push({id:u,type:"position",position:{x:i.position.x-c+y,y:i.position.y-d+p}}),n.get(u)?.forEach(t=>{e.some(e=>e.id===t.id)||o.push({id:t.id,type:"position",position:{x:t.position.x+c,y:t.position.y+d}})})),(a.width<t.width||a.height<t.height||c||d)&&o.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:f+(c?s[0]*c-y:0),height:h+(d?s[1]*d-p:0)}})}),o}function eJ(e,t,n,r,o){let i=r?.querySelector(".xyflow__viewport"),u=!1;if(!i)return{changes:[],updatedInternals:u};let l=[],a=window.getComputedStyle(i),{m22:s}=new window.DOMMatrixReadOnly(a.transform),c=[];for(let r of e.values()){let e=t.get(r.id);if(e){if(e.hidden)e.internals={...e.internals,handleBounds:void 0},u=!0;else{let i=eg(r.nodeElement),a=e.measured.width!==i.width||e.measured.height!==i.height;if(i.width&&i.height&&(a||!e.internals.handleBounds||r.force)){let d=r.nodeElement.getBoundingClientRect();e.measured=i,e.internals={...e.internals,positionAbsolute:V(e,o),handleBounds:{source:eE("source",r.nodeElement,d,s,e.id),target:eE("target",r.nodeElement,d,s,e.id)}},e.parentId&&eK(e,t,n,{nodeOrigin:o}),u=!0,a&&(l.push({id:e.id,type:"dimensions",dimensions:i}),e.expandParent&&e.parentId&&c.push({id:e.id,parentId:e.parentId,rect:U(e,o)}))}}}}if(c.length>0){let e=eG(c,t,n,o);l.push(...e)}return{changes:l,updatedInternals:u}}async function eU({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);let u=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,i]],r);return Promise.resolve(!!u&&(u.x!==n[0]||u.y!==n[1]||u.k!==n[2]))}function e0(e,t,n){for(let r of(e.clear(),t.clear(),n)){let{source:n,target:o,sourceHandle:i=null,targetHandle:u=null}=r,l=`${n}-source-${i}`,a=`${o}-target-${u}`,s=e.get(l)||new Map,c=e.get(a)||new Map,d={edgeId:r.id,source:n,target:o,sourceHandle:i,targetHandle:u};t.set(r.id,r),e.set(l,s.set(`${o}-${u}`,d)),e.set(a,c.set(`${n}-${i}`,d))}}function e1(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n)break;r=r.parentElement}while(r);return!1}function e2({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){let o=[];for(let[e,i]of t){let t=n.get(e)?.internals.userNode;t&&o.push({...t,position:i.position,dragging:r})}if(!e)return[o[0],o];let i=n.get(e).internals.userNode;return[{...i,position:t.get(e)?.position||i.position,dragging:r},o]}function e5({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let i={x:null,y:null},u=0,l=new Map,a=!1,s={x:0,y:0},c=null,d=!1,f=null,h=!1;return{update:function({noDragClassName:y,handleSelector:p,domNode:g,isSelectable:H,nodeId:T,nodeClickDistance:z=0}){function A({x:e,y:n},o){let{nodeLookup:u,nodeExtent:a,snapGrid:s,snapToGrid:c,nodeOrigin:d,onNodeDrag:f,onSelectionDrag:h,onError:y,updateNodePositions:p}=t();i={x:e,y:n};let g=!1,m={x:0,y:0,x2:0,y2:0};for(let[t,r]of(l.size>1&&a&&(m=G(j(l))),l)){let o={x:e-r.distance.x,y:n-r.distance.y};c&&(o=eu(o,s));let i=[[a[0][0],a[0][1]],[a[1][0],a[1][1]]];if(l.size>1&&a&&!r.extent){let{positionAbsolute:e}=r.internals,t=e.x-m.x+a[0][0],n=e.x+r.measured.width-m.x2+a[1][0];i=[[t,e.y-m.y+a[0][1]],[n,e.y+r.measured.height-m.y2+a[1][1]]]}let{position:f,positionAbsolute:h}=Y({nodeId:t,nextPosition:o,nodeLookup:u,nodeExtent:i,nodeOrigin:d,onError:y});g=g||r.position.x!==f.x||r.position.y!==f.y,r.position=f,r.internals.positionAbsolute=h}if(g&&(p(l,!0),o&&(r||f||!T&&h))){let[e,t]=e2({nodeId:T,dragItems:l,nodeLookup:u});r?.(o,l,e,t),f?.(o,e,t),T||h?.(o,t)}}async function k(){if(!c)return;let{transform:e,panBy:n,autoPanSpeed:r}=t(),[o,l]=K(s,c,r);(0!==o||0!==l)&&(i.x=(i.x??0)-o/e[2],i.y=(i.y??0)-l/e[2],await n({x:o,y:l})&&A(i,null)),u=requestAnimationFrame(k)}function B(r){let{nodeLookup:o,multiSelectionActive:u,nodesDraggable:a,transform:s,snapGrid:c,snapToGrid:f,selectNodesOnDrag:h,onNodeDragStart:y,onSelectionDragStart:p,unselectNodesAndEdges:g}=t();d=!0,h&&H||u||!T||o.get(T)?.selected||g(),H&&h&&T&&e?.(T);let m=ep(r.sourceEvent,{transform:s,snapGrid:c,snapToGrid:f});if(i=m,(l=function(e,t,n,r){let o=new Map;for(let[i,u]of e)if((u.selected||u.id===r)&&(!u.parentId||!function e(t,n){if(!t.parentId)return!1;let r=n.get(t.parentId);return!!r&&(!!r.selected||e(r,n))}(u,e))&&(u.draggable||t&&void 0===u.draggable)){let t=e.get(i);t&&o.set(i,{id:i,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:t.measured.width??0,height:t.measured.height??0}})}return o}(o,a,m,T)).size>0&&(n||y||!T&&p)){let[e,t]=e2({nodeId:T,dragItems:l,nodeLookup:o});n?.(r.sourceEvent,l,e,t),y?.(r.sourceEvent,e,t),T||p?.(r.sourceEvent,t)}}f=(0,x.Z)(g);let N=(function(){var e,t,n,r,o=$,i=I,u=S,l=P,a={},s=(0,m.Z)("start","drag","end"),c=0,d=0;function f(e){e.on("mousedown.drag",h).filter(l).on("touchstart.drag",g).on("touchmove.drag",H,b.Q7).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(u,l){if(!r&&o.call(this,u,l)){var a=z(this,i.call(this,u,l),u,l,"mouse");a&&((0,x.Z)(u.view).on("mousemove.drag",y,b.Dd).on("mouseup.drag",p,b.Dd),(0,w.Z)(u.view),(0,b.rG)(u),n=!1,e=u.clientX,t=u.clientY,a("start",u))}}function y(r){if((0,b.ZP)(r),!n){var o=r.clientX-e,i=r.clientY-t;n=o*o+i*i>d}a.mouse("drag",r)}function p(e){(0,x.Z)(e.view).on("mousemove.drag mouseup.drag",null),(0,w.D)(e.view,n),(0,b.ZP)(e),a.mouse("end",e)}function g(e,t){if(o.call(this,e,t)){var n,r,u=e.changedTouches,l=i.call(this,e,t),a=u.length;for(n=0;n<a;++n)(r=z(this,l,e,t,u[n].identifier,u[n]))&&((0,b.rG)(e),r("start",e,u[n]))}}function H(e){var t,n,r=e.changedTouches,o=r.length;for(t=0;t<o;++t)(n=a[r[t].identifier])&&((0,b.ZP)(e),n("drag",e,r[t]))}function T(e){var t,n,o=e.changedTouches,i=o.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<i;++t)(n=a[o[t].identifier])&&((0,b.rG)(e),n("end",e,o[t]))}function z(e,t,n,r,o,i){var l,d,h,y=s.copy(),p=(0,v.Z)(i||n,t);if(null!=(h=u.call(e,new M("beforestart",{sourceEvent:n,target:f,identifier:o,active:c,x:p[0],y:p[1],dx:0,dy:0,dispatch:y}),r)))return l=h.x-p[0]||0,d=h.y-p[1]||0,function n(i,u,s){var g,m=p;switch(i){case"start":a[o]=n,g=c++;break;case"end":delete a[o],--c;case"drag":p=(0,v.Z)(s||u,t),g=c}y.call(i,e,new M(i,{sourceEvent:u,subject:h,target:f,identifier:o,active:g,x:p[0]+l,y:p[1]+d,dx:p[0]-m[0],dy:p[1]-m[1],dispatch:y}),r)}}return f.filter=function(e){return arguments.length?(o="function"==typeof e?e:E(!!e),f):o},f.container=function(e){return arguments.length?(i="function"==typeof e?e:E(e),f):i},f.subject=function(e){return arguments.length?(u="function"==typeof e?e:E(e),f):u},f.touchable=function(e){return arguments.length?(l="function"==typeof e?e:E(!!e),f):l},f.on=function(){var e=s.on.apply(s,arguments);return e===s?f:e},f.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,f):Math.sqrt(d)},f})().clickDistance(z).on("start",e=>{let{domNode:n,nodeDragThreshold:r,transform:o,snapGrid:u,snapToGrid:l}=t();h=!1,0===r&&B(e),i=ep(e.sourceEvent,{transform:o,snapGrid:u,snapToGrid:l}),c=n?.getBoundingClientRect()||null,s=eb(e.sourceEvent,c)}).on("drag",e=>{let{autoPanOnNodeDrag:n,transform:r,snapGrid:o,snapToGrid:u,nodeDragThreshold:f}=t(),y=ep(e.sourceEvent,{transform:r,snapGrid:o,snapToGrid:u});if("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1&&(h=!0),!h){if(!a&&n&&d&&(a=!0,k()),!d){let t=y.xSnapped-(i.x??0),n=y.ySnapped-(i.y??0);Math.sqrt(t*t+n*n)>f&&B(e)}(i.x!==y.xSnapped||i.y!==y.ySnapped)&&l&&d&&(s=eb(e.sourceEvent,c),A(y,e.sourceEvent))}}).on("end",e=>{if(d&&!h&&(a=!1,d=!1,cancelAnimationFrame(u),l.size>0)){let{nodeLookup:n,updateNodePositions:r,onNodeDragStop:i,onSelectionDragStop:u}=t();if(r(l,!1),o||i||!T&&u){let[t,r]=e2({nodeId:T,dragItems:l,nodeLookup:n,dragging:!1});o?.(e.sourceEvent,l,t,r),i?.(e.sourceEvent,t,r),T||u?.(e.sourceEvent,r)}}}).filter(e=>{let t=e.target;return!e.button&&(!y||!e1(t,`.${y}`,g))&&(!p||e1(t,p,g))});f.call(N)},destroy:function(){f?.on(".drag",null)}}}function e7(e,t,n,r){let o=null;return[(t[n]||[]).reduce((t,i)=>{if(e.id===r.nodeId&&n===r.handleType&&i.id===r.handleId)o=i;else{let n=eZ(e,i,i.position,!0);t.push({...i,...n})}return t},[]),o]}function e3(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}let e4=()=>!0;function e6(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:i,doc:u,lib:l,flowId:a,isValidConnection:s=e4,handleLookup:d}){let f="target"===i,h=t?u.querySelector(`.${l}-flow__handle[data-id="${a}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:y,y:p}=eb(e),g=u.elementFromPoint(y,p),m=g?.classList.contains(`${l}-flow__handle`)?g:h,x={handleDomNode:m,isValid:!1,connection:null,toHandle:null};if(m){let e=e3(void 0,m),t=m.getAttribute("data-nodeid"),i=m.getAttribute("data-handleid"),u=m.classList.contains("connectable"),l=m.classList.contains("connectableend");if(!t)return x;let a={source:f?t:r,sourceHandle:f?i:o,target:f?r:t,targetHandle:f?o:i};x.connection=a;let h=u&&l&&(n===c.Strict?f&&"source"===e||!f&&"target"===e:t!==r||i!==o);x.isValid=h&&s(a);let y=d?.get(`${t}-${e}-${i}`);y&&(x.toHandle={...y})}return x}let e8={onPointerDown:function(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:i,isTarget:u,domNode:l,nodeLookup:a,lib:s,autoPanOnConnect:c,flowId:d,panBy:f,cancelConnection:h,onConnectStart:y,onConnect:g,onConnectEnd:m,isValidConnection:x=e4,onReconnectEnd:v,updateConnection:w,getTransform:b,getFromHandle:E,autoPanSpeed:M}){let $;let I=em(e.target),S=0,{x:P,y:H}=eb(e),T=e3(i,I?.elementFromPoint(P,H)),z=l?.getBoundingClientRect();if(!z||!T)return;let A=eb(e,z),k=!1,N=null,O=!1,_=null,[L,V]=function({nodeLookup:e,nodeId:t,handleId:n,handleType:r}){let o=new Map,i={nodeId:t,handleId:n,handleType:r},u=null;for(let t of e.values())if(t.internals.handleBounds){let[e,n]=e7(t,t.internals.handleBounds,"source",i),[r,l]=e7(t,t.internals.handleBounds,"target",i);u=u||(n??l),[...e,...r].forEach(e=>o.set(`${e.nodeId}-${e.type}-${e.id}`,e))}if(!u){let n=e.get(t);if(n?.internals.handleBounds){i.handleType="source"===r?"target":"source";let[,e]=e7(n,n.internals.handleBounds,i.handleType,i);u=e}}return[o,u]}({nodeLookup:a,nodeId:o,handleId:r,handleType:T}),j={...V,nodeId:o,type:T,position:V.position},R=a.get(o),Z={inProgress:!0,isValid:null,from:eZ(R,j,p.Left,!0),fromHandle:j,fromPosition:j.position,fromNode:R,to:A,toHandle:null,toPosition:B[j.position],toNode:null};w(Z);let D=Z;function C(e){var i,l;let h;if(!E()||!j){Y(e);return}let y=b();$=function(e,t,n){let r=[],o=1/0;for(let i of n.values()){let n=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2));n<=t&&(n<o?r=[i]:n===o&&r.push(i),o=n)}return r.length?1===r.length?r[0]:r.find(e=>"target"===e.type)||r[0]:null}(el(A=eb(e,z),y,!1,[1,1]),n,L),k||(function e(){if(!c||!z)return;let[t,n]=K(A,z,M);f({x:t,y:n}),S=requestAnimationFrame(e)}(),k=!0);let p=e6(e,{handle:$,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:u?"target":"source",isValidConnection:x,doc:I,lib:s,flowId:d,handleLookup:L});_=p.handleDomNode,N=p.connection,i=!!$,l=p.isValid,h=null,l?h=!0:i&&!l&&(h=!1),O=h;let g={...D,isValid:O,to:$&&O?ea({x:$.x,y:$.y},y):A,toHandle:p.toHandle,toPosition:O&&p.toHandle?p.toHandle.position:B[j.position],toNode:p.toHandle?a.get(p.toHandle.nodeId):null};O&&$&&D.toHandle&&g.toHandle&&D.toHandle.type===g.toHandle.type&&D.toHandle.nodeId===g.toHandle.nodeId&&D.toHandle.id===g.toHandle.id||(w(g),D=g)}function Y(e){($||_)&&N&&O&&g?.(N),m?.(e),i&&v?.(e),h(),cancelAnimationFrame(S),k=!1,O=!1,N=null,_=null,I.removeEventListener("mousemove",C),I.removeEventListener("mouseup",Y),I.removeEventListener("touchmove",C),I.removeEventListener("touchend",Y)}y?.(e,{nodeId:o,handleId:r,handleType:T}),I.addEventListener("mousemove",C),I.addEventListener("mouseup",Y),I.addEventListener("touchmove",C),I.addEventListener("touchend",Y)},isValid:e6};function e9({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){let o=(0,x.Z)(e);return{update:function({translateExtent:e,width:i,height:u,zoomStep:l=10,pannable:a=!0,zoomable:s=!0,inversePan:c=!1}){let d=[0,0],f=(0,H.sP)().on("start",e=>{("mousedown"===e.sourceEvent.type||"touchstart"===e.sourceEvent.type)&&(d=[e.sourceEvent.clientX??e.sourceEvent.touches[0].clientX,e.sourceEvent.clientY??e.sourceEvent.touches[0].clientY])}).on("zoom",a?o=>{let l=n();if("mousemove"!==o.sourceEvent.type&&"touchmove"!==o.sourceEvent.type||!t)return;let a=[o.sourceEvent.clientX??o.sourceEvent.touches[0].clientX,o.sourceEvent.clientY??o.sourceEvent.touches[0].clientY],s=[a[0]-d[0],a[1]-d[1]];d=a;let f=r()*Math.max(l[2],Math.log(l[2]))*(c?-1:1),h={x:l[0]-s[0]*f,y:l[1]-s[1]*f};t.setViewportConstrained({x:h.x,y:h.y,zoom:l[2]},[[0,0],[i,u]],e)}:null).on("zoom.wheel",s?e=>{let r=n();if("wheel"!==e.sourceEvent.type||!t)return;let o=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*l,i=r[2]*Math.pow(2,o);t.scaleTo(i)}:null);o.call(f,{})},destroy:function(){o.on("zoom",null)},pointer:v.Z}}let te=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,tt=e=>({x:e.x,y:e.y,zoom:e.k}),tn=({x:e,y:t,zoom:n})=>H.CR.translate(e,t).scale(n),tr=(e,t)=>e.target.closest(`.${t}`),to=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),ti=(e,t=0,n=()=>{})=>{let r="number"==typeof t&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},tu=e=>{let t=e.ctrlKey&&ec()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function tl({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:o,viewport:i,onPanZoom:u,onPanZoomStart:l,onPanZoomEnd:a,onTransformChange:s,onDraggingChange:c}){let f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=e.getBoundingClientRect(),y=(0,H.sP)().clickDistance(!eo(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(o),p=(0,x.Z)(e).call(y);E({x:i.x,y:i.y,zoom:X(i.zoom,t,n)},[[0,0],[h.width,h.height]],o);let g=p.on("wheel.zoom"),m=p.on("dblclick.zoom");function w(e,t){return p?new Promise(n=>{y?.transform(ti(p,t?.duration,()=>n(!0)),e)}):Promise.resolve(!1)}function b(){y.on("zoom",null)}async function E(e,t,n){let r=tn(e),o=y?.constrain()(r,t,n);return o&&await w(o),new Promise(e=>e(o))}return y.wheelDelta(tu),{update:function({noWheelClassName:e,noPanClassName:t,onPaneContextMenu:n,userSelectionActive:r,panOnScroll:o,panOnDrag:i,panOnScrollMode:h,panOnScrollSpeed:x,preventScrolling:w,zoomOnPinch:E,zoomOnScroll:M,zoomOnDoubleClick:$,zoomActivationKeyPressed:I,lib:S}){r&&!f.isZoomingOrPanning&&b();let P=!o||I||r?function({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){if(!t&&"wheel"===r.type&&!r.ctrlKey||tr(r,e))return null;r.preventDefault(),n.call(this,r,o)}}({noWheelClassName:e,preventScrolling:w,d3ZoomHandler:g}):function({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:i,zoomOnPinch:u,onPanZoomStart:l,onPanZoom:a,onPanZoomEnd:s}){return c=>{if(tr(c,t))return!1;c.preventDefault(),c.stopImmediatePropagation();let f=n.property("__zoom").k||1;if(c.ctrlKey&&u){let e=(0,v.Z)(c),t=tu(c);r.scaleTo(n,f*Math.pow(2,t),e,c);return}let h=1===c.deltaMode?20:1,y=o===d.Vertical?0:c.deltaX*h,p=o===d.Horizontal?0:c.deltaY*h;!ec()&&c.shiftKey&&o!==d.Vertical&&(y=c.deltaY*h,p=0),r.translateBy(n,-(y/f)*i,-(p/f)*i,{internal:!0});let g=tt(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,l?.(c,g)),e.isPanScrolling&&(a?.(c,g),e.panScrollTimeout=setTimeout(()=>{s?.(c,g),e.isPanScrolling=!1},150))}}({zoomPanValues:f,noWheelClassName:e,d3Selection:p,d3Zoom:y,panOnScrollMode:h,panOnScrollSpeed:x,zoomOnPinch:E,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:a});if(p.on("wheel.zoom",P,{passive:!1}),!r){let e=function({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;let o=tt(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=o,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,o)}}({zoomPanValues:f,onDraggingChange:c,onPanZoomStart:l});y.on("start",e);let t=function({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return i=>{e.usedRightMouseButton=!!(n&&to(t,e.mouseButton??0)),i.sourceEvent?.sync||r([i.transform.x,i.transform.y,i.transform.k]),o&&!i.sourceEvent?.internal&&o?.(i.sourceEvent,tt(i.transform))}}({zoomPanValues:f,panOnDrag:i,onPaneContextMenu:!!n,onPanZoom:u,onTransformChange:s});y.on("zoom",t);let r=function({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:i}){return u=>{if(!u.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,i&&to(t,e.mouseButton??0)&&!e.usedRightMouseButton&&u.sourceEvent&&i(u.sourceEvent),e.usedRightMouseButton=!1,r(!1),o&&te(e.prevViewport,u.transform))){let t=tt(u.transform);e.prevViewport=t,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o?.(u.sourceEvent,t)},n?150:0)}}}({zoomPanValues:f,panOnDrag:i,panOnScroll:o,onPaneContextMenu:n,onPanZoomEnd:a,onDraggingChange:c});y.on("end",r)}let H=function({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:i,userSelectionActive:u,noWheelClassName:l,noPanClassName:a,lib:s}){return c=>{let d=e||t,f=n&&c.ctrlKey;if(1===c.button&&"mousedown"===c.type&&(tr(c,`${s}-flow__node`)||tr(c,`${s}-flow__edge`)))return!0;if(!r&&!d&&!o&&!i&&!n||u||tr(c,l)&&"wheel"===c.type||tr(c,a)&&("wheel"!==c.type||o&&"wheel"===c.type&&!e)||!n&&c.ctrlKey&&"wheel"===c.type)return!1;if(!n&&"touchstart"===c.type&&c.touches?.length>1)return c.preventDefault(),!1;if(!d&&!o&&!f&&"wheel"===c.type||!r&&("mousedown"===c.type||"touchstart"===c.type)||Array.isArray(r)&&!r.includes(c.button)&&"mousedown"===c.type)return!1;let h=Array.isArray(r)&&r.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||"wheel"===c.type)&&h}}({zoomActivationKeyPressed:I,panOnDrag:i,zoomOnScroll:M,panOnScroll:o,zoomOnDoubleClick:$,zoomOnPinch:E,userSelectionActive:r,noPanClassName:t,noWheelClassName:e,lib:S});y.filter(H),$?p.on("dblclick.zoom",m):p.on("dblclick.zoom",null)},destroy:b,setViewport:async function(e,t){let n=tn(e);return await w(n,t),new Promise(e=>e(n))},setViewportConstrained:E,getViewport:function(){let e=p?(0,H.P2)(p.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return p?new Promise(n=>{y?.scaleTo(ti(p,t?.duration,()=>n(!0)),e)}):Promise.resolve(!1)},scaleBy:function(e,t){return p?new Promise(n=>{y?.scaleBy(ti(p,t?.duration,()=>n(!0)),e)}):Promise.resolve(!1)},setScaleExtent:function(e){y?.scaleExtent(e)},setTranslateExtent:function(e){y?.translateExtent(e)},syncViewport:function(e){if(p){let t=tn(e),n=p.property("__zoom");(n.k!==e.zoom||n.x!==e.x||n.y!==e.y)&&y?.transform(p,t,null,{sync:!0})}},setClickDistance:function(e){let t=!eo(e)||e<0?0:e;y?.clickDistance(t)}}}(s=g||(g={})).Line="line",s.Handle="handle"},210:function(e,t,n){n.d(t,{Z:function(){return function e(t){if("string"==typeof t||"number"==typeof t)return""+t;let n="";if(Array.isArray(t))for(let r=0,o;r<t.length;r++)""!==(o=e(t[r]))&&(n+=(n&&" ")+o);else for(let e in t)t[e]&&(n+=(n&&" ")+e);return n}}})},7519:function(e,t,n){n.d(t,{X:function(){return r}});function r(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}},4408:function(e,t,n){n.d(t,{F:function(){return f},s:function(){return c}});var r=n(2265),o=n(5006);let i=e=>{let t;let n=new Set,r=(e,r)=>{let o="function"==typeof e?e(t):e;if(!Object.is(o,t)){let e=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach(n=>n(t,e))}},o=()=>t,i={setState:r,getState:o,getInitialState:()=>u,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,o,i);return i},u=e=>e?i(e):i,{useDebugValue:l}=r,{useSyncExternalStoreWithSelector:a}=o,s=e=>e;function c(e,t=s,n){let r=a(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return l(r),r}let d=(e,t)=>{let n=u(e),r=(e,r=t)=>c(n,e,r);return Object.assign(r,n),r},f=(e,t)=>e?d(e,t):d}}]);